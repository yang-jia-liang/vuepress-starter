(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{629:function(t,a,s){"use strict";s.r(a);var r=s(29),n=Object(r.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"引言"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#引言"}},[t._v("#")]),t._v(" 引言")]),t._v(" "),s("h3",{attrs:{id:"背景"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#背景"}},[t._v("#")]),t._v(" 背景")]),t._v(" "),s("p",[t._v("大家都知道Native app体验确实很好，下载到手机上之后入口也方便。它也有一些缺点:"),s("br"),t._v("​"),s("br")]),t._v(" "),s("ul",[s("li",[t._v("开发成本高(ios和安卓)")]),t._v(" "),s("li",[t._v("软件上线需要审核")]),t._v(" "),s("li",[t._v("版本更新需要将新版本上传到不同的应用商店")]),t._v(" "),s("li",[t._v("想使用一个app就必须去下载才能使用，即使是偶尔需要使用一下下")])]),t._v(" "),s("p",[s("br"),t._v("而web网页开发成本低，网站更新时上传最新的资源到服务器即可，用手机带的浏览器打开就可以使用。但是除了体验上比Native app还是差一些，还有一些明显的缺点"),s("br"),t._v("​"),s("br")]),t._v(" "),s("ul",[s("li",[t._v("手机桌面入口不够便捷，想要进入一个页面必须要记住它的url或者加入书签")]),t._v(" "),s("li",[t._v("没网络就没响应，不具备离线能力")]),t._v(" "),s("li",[t._v("不像APP一样能进行消息推送")])]),t._v(" "),s("h3",{attrs:{id:"what-s-pwa"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#what-s-pwa"}},[t._v("#")]),t._v(" What's PWA?")]),t._v(" "),s("p",[t._v("PWA全称Progressive Web App，即渐进式WEB应用。"),s("br"),t._v("​")]),t._v(" "),s("p",[t._v("一个 PWA 应用首先是一个网页, 可以通过 Web 技术编写出一个网页应用. 随后添加上 App Manifest 和 Service Worker 来实现 PWA 的安装和离线等功能")]),t._v(" "),s("p",[t._v("解决了哪些问题？")]),t._v(" "),s("ul",[s("li",[t._v("可以添加至主屏幕，点击主屏幕图标可以实现启动动画以及隐藏地址栏")]),t._v(" "),s("li",[t._v("实现离线缓存功能，即使用户手机没有网络，依然可以使用一些离线功能")]),t._v(" "),s("li",[t._v("实现了消息推送")])]),t._v(" "),s("p",[s("br"),t._v("它解决了上述提到的问题，这些特性将使得 Web 应用渐进式接近原生 App。"),s("br")]),t._v(" "),s("h3",{attrs:{id:"特性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#特性"}},[t._v("#")]),t._v(" 特性")]),t._v(" "),s("ul",[s("li",[t._v("Web App可以被添加到桌面并有它自己的应用图标")]),t._v(" "),s("li",[t._v("同时，从桌面开启时，会和原生app一样有它自己的“开屏图”；")]),t._v(" "),s("li",[t._v("更进一步的，这个Web App在的样子几乎和原生应用一样——没有浏览器的地址栏、工具条，似乎和Native App一样运行在一个独立的容器中。")])]),t._v(" "),s("h2",{attrs:{id:"pwa的实现"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#pwa的实现"}},[t._v("#")]),t._v(" PWA的实现")]),t._v(" "),s("br"),t._v(" "),s("h3",{attrs:{id:"manifest"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#manifest"}},[t._v("#")]),t._v(" Manifest")]),t._v(" "),s("p",[t._v("Manifest就是一个json文件，在里面给出了诸如主题、背景色、图标等一系列的描述，用来让Web应用更接近于原生应用。"),s("br"),t._v("​")]),t._v(" "),s("p",[t._v("比如下面这个例子")]),t._v(" "),s("p",[t._v("json文件中不能加注释")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vuepress-starter"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"short_name"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"VP"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"description"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vuepress脚手架"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"start_url"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/vuepress-starter"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"display"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"standalone"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"theme_color"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"#FFDF00"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"background_color"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"#FFDF00"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"icons"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"src"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"icons/icon-144.png"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"sizes"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"144x144"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"image/png"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"src"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"icons/icon-192.png"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"sizes"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"152x152"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"image/png"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])])]),s("p",[s("br"),t._v("​"),s("br")]),t._v(" "),s("h4",{attrs:{id:"name"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#name"}},[t._v("#")]),t._v(" name")]),t._v(" "),s("p",[t._v("Web App的名称"),s("br"),t._v("​"),s("br")]),t._v(" "),s("h4",{attrs:{id:"short-name"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#short-name"}},[t._v("#")]),t._v(" short_name")]),t._v(" "),s("p",[t._v("简称，当没有足够空间展示应用的name时，系统就会使用short_name"),s("br"),t._v("​"),s("br")]),t._v(" "),s("h4",{attrs:{id:"start-url"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#start-url"}},[t._v("#")]),t._v(" start_url")]),t._v(" "),s("p",[t._v("指定了用户打开该Web App时加载的URL。相对URL会相对于manifest"),s("br")]),t._v(" "),s("h4",{attrs:{id:"display"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#display"}},[t._v("#")]),t._v(" display")]),t._v(" "),s("p",[t._v("display控制了应用的显示模式")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[s("strong",[t._v("显示模式")])]),t._v(" "),s("th",[s("strong",[t._v("描述")])]),t._v(" "),s("th",[s("strong",[t._v("后备显示模式")])])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("fullscreen")]),t._v(" "),s("td",[t._v("全屏显示, 所有可用的显示区域都被使用, 并且不显示状态栏。")]),t._v(" "),s("td",[t._v("standalone")])]),t._v(" "),s("tr",[s("td",[t._v("standalone")]),t._v(" "),s("td",[t._v("独立应用模式，这种模式下打开的应用有自己的启动图标，并且不会有浏览器的地址栏。因此看起来更像一个Native App")]),t._v(" "),s("td",[t._v("minimal-ui")])]),t._v(" "),s("tr",[s("td",[t._v("minimal-ui")]),t._v(" "),s("td",[t._v("该应用程序将看起来像一个独立的应用程序，但会有浏览器地址栏。 样式因浏览器而异。")]),t._v(" "),s("td",[t._v("browser")])]),t._v(" "),s("tr",[s("td",[t._v("browser")]),t._v(" "),s("td",[t._v("该应用程序在传统的浏览器标签或新窗口中打开，具体实现取决于浏览器和平台。 这是默认的设置。")]),t._v(" "),s("td",[t._v("(None)")])])])]),t._v(" "),s("p",[t._v("​")]),t._v(" "),s("p",[t._v("​")]),t._v(" "),s("p",[t._v("让我们来看下这四种模式的差异："),s("br"),s("br"),t._v("当然，不同的系统所表现出的具体样式也不完全一样。就像示例中的虚拟按键在fullscreen 模式下会默认隐藏。"),s("br"),t._v("​"),s("br")]),t._v(" "),s("h4",{attrs:{id:"orientation"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#orientation"}},[t._v("#")]),t._v(" orientation")]),t._v(" "),s("p",[t._v("控制Web App的方向。设置某些值会具有类似锁屏的效果（禁止旋转），例如例子中的portrait-primary​"),s("br"),t._v("​")]),t._v(" "),s("p",[t._v("具体的值包括：any, natural, landscape, landscape-primary, landscape-secondary, portrait, portrait-primary, portrait-secondary。"),s("br"),t._v(" "),s("br"),t._v("​"),s("br")]),t._v(" "),s("h4",{attrs:{id:"icons"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#icons"}},[t._v("#")]),t._v(" icons")]),t._v(" "),s("p",[t._v("icons用来指定应用的桌面图标。icons本身是一个数组，每个元素包含三个属性："),s("br"),t._v("​"),s("br")]),t._v(" "),s("ul",[s("li",[t._v("sizes：图标的大小。通过指定大小，系统会选取最合适的图标展示在相应位置上。")]),t._v(" "),s("li",[t._v("src：   图标的文件路径。注意相对路径是相对于manifest。")]),t._v(" "),s("li",[t._v("type：图标的图片类型。")])]),t._v(" "),s("br"),t._v(" "),s("h4",{attrs:{id:"background-color"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#background-color"}},[t._v("#")]),t._v(" background_color")]),t._v(" "),s("p",[t._v("“开屏图”其实是背景颜色 + 图标的展示模式（并不会设置一张所谓的开屏图）。background_color是在应用的样式资源为加载完毕前的默认背景，因此会展示在开屏界面。background_color加上我们刚才定义的icons就组成了Web App打开时的“开屏图”。"),s("br"),t._v("​"),s("br")]),t._v(" "),s("h4",{attrs:{id:"theme-color"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#theme-color"}},[t._v("#")]),t._v(" theme_color")]),t._v(" "),s("p",[t._v("默认主题颜色"),s("br"),t._v("​"),s("br")]),t._v(" "),s("h4",{attrs:{id:"description"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#description"}},[t._v("#")]),t._v(" description")]),t._v(" "),s("p",[t._v("一段对该应用的描述"),s("br"),t._v("​"),s("br")]),t._v(" "),s("h3",{attrs:{id:"使用manifest"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用manifest"}},[t._v("#")]),t._v(" 使用Manifest")]),t._v(" "),s("p",[t._v("在引用这个manifest.json的时候只要在html的head里加上")]),t._v(" "),s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("html")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("head")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        ...\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("link")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rel")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("manifest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("/manifest.json"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("head")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" \n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("html")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("p",[s("br"),t._v("效果如下"),s("br"),s("br"),t._v("打开后是没有地址栏的，跟原生应用效果一样了，并且有个splash screen"),s("br"),t._v("​"),s("br")]),t._v(" "),s("h3",{attrs:{id:"兼容性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#兼容性"}},[t._v("#")]),t._v(" 兼容性")]),t._v(" "),s("p",[t._v("​")]),t._v(" "),s("p",[t._v("到目前为止，我们的工作都非常顺利：创建manifest.json，添加meta标签，然后把我们的Web App添加到桌面。然而，如果我们在iPhone上访问我们的站点，然后“添加到主屏幕”，你会发现——一切都失效了！是的，你没有看错，一切都回到了原样。"),s("br")]),t._v(" "),s("h2",{attrs:{id:"ios中的兼容处理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ios中的兼容处理"}},[t._v("#")]),t._v(" IOS中的兼容处理")]),t._v(" "),s("p",[s("br"),t._v("safari虽然不支持Web App Manifest，但是它有自己的一些head标签来定义相应的资源与展示形式："),s("br"),t._v(" "),s("br"),t._v("​")]),t._v(" "),s("p",[t._v("下面是项目中的相关设置")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("// IOS中的Manifest兼容\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'meta'")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" name: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'apple-mobile-web-app-capable'")]),t._v(", content: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'yes'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(",                     // 类似于manifest中的display的功能，通过设置为yes可以进入standalone模式\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'meta'")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" name: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'apple-mobile-web-app-status-bar-style'")]),t._v(", content: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'black'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(",          // 移动设备状态栏的样式\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'link'")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" rel: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'apple-touch-icon'")]),t._v(", href: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/image/icon-152.png'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(",                     // 桌面图标\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'link'")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" rel: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mask-icon'")]),t._v(", href: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/icons/safari-pinned-tab.svg'")]),t._v(", color: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'#3eaf7c'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(", // 触摸栏上的自定义Safari书签图标和颜色\n")])])]),s("h3",{attrs:{id:"ie中的兼容处理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ie中的兼容处理"}},[t._v("#")]),t._v(" IE中的兼容处理")]),t._v(" "),s("p",[s("br"),t._v("与Safari类似，IE中也有自己的meta标签来指示相应的资源。其中比较重要的有："),s("br"),t._v(" "),s("br"),t._v("下面是项目中的相关设置")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("// Windows8 / Microsoft Surface"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("IE10+"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" 中的Manifest兼容\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'meta'")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" name: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'msapplication-TileImage'")]),t._v(", content: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/icons/msapplication-icon-144x144.png'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(",  // 瓷砖块的背景图\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'meta'")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" name: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'msapplication-TileColor'")]),t._v(", content: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'#000000'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(",                                // 瓷砖块颜色\n")])])]),s("h3",{attrs:{id:"service-worker实现离线缓存"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#service-worker实现离线缓存"}},[t._v("#")]),t._v(" service worker实现离线缓存")]),t._v(" "),s("h4",{attrs:{id:"什么是service-worker"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#什么是service-worker"}},[t._v("#")]),t._v(" 什么是service worker")]),t._v(" "),s("p",[s("br"),t._v("Service Worker 是 Chrome 团队提出和力推的一个 WEB API，用于给 web 应用提供高级的可持续的后台处理能力。"),s("br"),t._v(" "),s("br"),s("br"),t._v(" "),s("br"),t._v("Service Workers 就像介于服务器和网页之间的拦截器，能够拦截进出的HTTP 请求，从而完全控制你的网站。"),s("br"),t._v("​"),s("br")]),t._v(" "),s("h4",{attrs:{id:"最主要的特点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#最主要的特点"}},[t._v("#")]),t._v(" 最主要的特点")]),t._v(" "),s("p",[s("strong",[t._v("​")]),s("br")]),t._v(" "),s("ul",[s("li",[t._v("在页面中注册并安装成功后，运行于浏览器后台，不受页面刷新的影响，可以监听和截拦作用域范围内所有页面的 HTTP 请求。")]),t._v(" "),s("li",[t._v("网站必须使用 HTTPS。除了使用本地开发环境调试时(如域名使用 localhost)")]),t._v(" "),s("li",[t._v("运行于浏览器后台，可以控制打开的作用域范围下所有的页面请求")]),t._v(" "),s("li",[t._v("单独的作用域范围，单独的运行环境和执行线程")]),t._v(" "),s("li",[t._v("不能操作页面 DOM。但可以通过事件机制来处理")]),t._v(" "),s("li",[t._v("事件驱动型服务线程")])]),t._v(" "),s("p",[s("br"),t._v("为什么要求网站必须是HTTPS的，大概是因为service worker权限太大能拦截所有页面的请求吧，如果http的网站安装service worker很容易被攻击"),s("br"),t._v("​"),s("br")]),t._v(" "),s("h4",{attrs:{id:"浏览器支持情况"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#浏览器支持情况"}},[t._v("#")]),t._v(" 浏览器支持情况")]),t._v(" "),s("br"),t._v(" "),s("h2",{attrs:{id:"总结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),s("h3",{attrs:{id:"pwa的优势"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#pwa的优势"}},[t._v("#")]),t._v(" PWA的优势")]),t._v(" "),s("ul",[s("li",[t._v("可以将app的快捷方式放置到桌面上，全屏运行，与原生app无异")]),t._v(" "),s("li",[t._v("能够在各种网络环境下使用，包括网络差和断网条件下，不会显示undefind")]),t._v(" "),s("li",[t._v("推送消息的能力")]),t._v(" "),s("li",[t._v("其本质是一个网页，没有原生app的各种启动条件，快速响应用户指令")])]),t._v(" "),s("h3",{attrs:{id:"pwa存在的问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#pwa存在的问题"}},[t._v("#")]),t._v(" PWA存在的问题")]),t._v(" "),s("ul",[s("li",[t._v("支持率不高:现在ios手机端不支持pwa，IE也暂时不支持")]),t._v(" "),s("li",[t._v("Chrome在中国桌面版占有率还是不错的，安卓移动端上的占有率却很低")]),t._v(" "),s("li",[t._v("各大厂商还未明确支持pwa")]),t._v(" "),s("li",[t._v("依赖的GCM服务在国内无法使用")]),t._v(" "),s("li",[t._v("微信小程序的竞争")])]),t._v(" "),s("p",[s("br"),t._v("尽管有上述的一些缺点，PWA技术仍然有很多可以使用的点。")]),t._v(" "),s("ul",[s("li",[t._v("service worker技术实现离线缓存，可以将一些不经常更改的静态文件放到缓存中，提升用户体验。")]),t._v(" "),s("li",[t._v("service worker实现消息推送，使用浏览器推送功能，吸引用户")]),t._v(" "),s("li",[t._v("渐进式开发，尽管一些浏览器暂时不支持，可以利用上述技术给使用支持浏览器的用户带来更好的体验。")])])])}),[],!1,null,null,null);a.default=n.exports}}]);